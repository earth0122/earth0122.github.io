<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <style>
      * {
        padding: 0;
        margin: 0;
        list-style: none;
      }
      #productBtnArea {
        margin: auto;
        display: flex;
        justify-content: center;
      }
      #productBtnArea > button {
        margin: 10px;
        width: 100px;
        height: 30px;
        background-color: rgb(17, 17, 145);
        color: white;
        border-radius: 50px;
      }
      #productBtnArea > button:hover {
        color: unset;
        background-color: gray;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div id="productBtnArea" class="row mb-3">
        <button id="iphone" type="button" class="product-btn btn-primary" onclick="appleProduct(this.innerText)">Iphone</button>
        <button id="ipad" type="button" class="product-btn btn-primary" onclick="appleProduct(this.innerText)">Ipad</button>
        <button id="mac" type="button" class="product-btn btn-primary" onclick="appleProduct(this.innerText)">MacPro</button>
      </div>
      <div class="row">
        <!-- 左圖 -->
        <div class="col-12 col-md-6">
          <img id="product-img" src="" class="img-fluid" alt="" />
        </div>
        <!-- 右邊顏色規格 -->
        <div class="col-12 col-md-6">
          <div id="color" class="row" style="box-sizing: border-box"></div>
          <div id="type" class="row"></div>
          <div id="price" class="row"></div>
        </div>
      </div>
    </div>
    <script>
      let Product = {
        IPhone: {
          Detail: {
            productName: "iPhone 11",
            baseImgUrl: "./圖片/iphone11-select-2019-family.png",
          },
          OutWard: [
            {
              color: "紅色",
              colorValue: "#ff0000",
              imageUrl: "./圖片/iphone-red.png",
            },
            {
              color: "黃色",
              colorValue: "#ffff00",
              imageUrl: "./圖片/iphone-yellow.png",
            },
            {
              color: "黑色",
              colorValue: "#000000",
              imageUrl: "./圖片/iphone-black.png",
            },
          ],
          Spec: {
            Storge: [
              { size: "64GB", fit: 24900 },
              { size: "128GB", fit: 26900 },
              { size: "256GB", fit: 30400 },
            ],
          },
        },
        IPad: {
          Detail: {
            productName: "iPad",
            baseImgUrl: "./圖片/ipad-hero-unselected-201909_GEO_TW.png",
          },
          OutWard: [
            {
              color: "太空灰色",
              colorValue: "#6e6969",
              imageUrl: "./圖片/ipad-space.png",
            },
            {
              color: "銀色",
              colorValue: "#b9aeae",
              imageUrl: "./圖片/ipad-silver.png",
            },
            {
              color: "金色",
              colorValue: "#ceb7a8",
              imageUrl: "./圖片/ipad-gold.png",
            },
          ],
          Spec: {
            Storge: [
              { size: "32GB", fit: 10900 },
              { size: "128GB", fit: 13900 },
            ],
          },
        },
        MacPro: {
          Detail: {
            productName: "MacPro 13",
            baseImgUrl: "./圖片/mbp13touch-space-gallery1-201907.png",
          },
          OutWard: [
            {
              color: "太空灰色",
              colorValue: "#6e6969",
              imageUrl: "./圖片/mbp13touch-space.png",
            },
            {
              color: "銀色",
              colorValue: "#b9aeae",
              imageUrl: "./圖片/mbp13touch-silver.png",
            },
          ],
          Spec: {
            Storge: [
              { size: "256GB", fit: 51300 },
              { size: "512GB", fit: 57300 },
              { size: "1TB", fit: 63300 },
              { size: "2TB", fit: 75300 },
            ],
          },
        },
      };

      let iphoneBtn = document.querySelector("#iphone");
      let ipadBtn = document.querySelector("#ipad");
      let macBtn = document.querySelector("#mac");

      let productImg = document.querySelector("#product-img");
      let color = document.querySelector("#color");
      let type = document.querySelector("#type");
      let price = document.querySelector("#price");
      //初始化
      function appleProduct(product) {
        color.innerHTML = "";
        type.innerHTML = "";
        price.innerHTML = "";
        productImg.setAttribute("src", Product[product].Detail.baseImgUrl);

        //顏色
        let colorTitle = document.createElement("div");
        let colorH2 = document.createElement("h2");
        colorH2.innerText = "顏色";
        // TODO:
        colorTitle.classList.add(
          "w-100",
          "d-flex",
          "justify-content-center",
          "justify-content-md-start"
        );
        colorTitle.appendChild(colorH2);
        color.appendChild(colorTitle);

        for (let item of Product[product].OutWard) {
          let colorDiv = document.createElement("div");
          let colorBtn = document.createElement("button");
          let colorBtnDiv = document.createElement("div");
          let colorI = document.createElement("i");
          let colorSpan = document.createElement("span");
          // TODO:
          colorDiv.classList.add("col-6", "col-md-4");
          colorBtn.classList.add(
            "color-btn",
            "btn",
            "btn-outline-dark",
            "mb-3",
            "w-100"
          );
          colorBtn.setAttribute("urlVal", item.imageUrl);

          colorBtnDiv.classList.add(
            "p-4",
            "d-flex",
            "flex-column",
            "justify-content-center",
            "align-items-center"
          );
          colorI.classList.add("fas", "fa-circle", "display-4");
          colorI.style.color = item.colorValue;

          colorSpan.innerText = item.color;

          colorBtnDiv.appendChild(colorI);
          colorBtnDiv.appendChild(colorSpan);

          colorBtn.appendChild(colorBtnDiv);
          colorDiv.appendChild(colorBtn);

          colorArea.appendChild(colorDiv);
        }

        let colorBtns = document.getElementsByClassName("color-btn");

        for (let btn of colorBtns) {
          btn.addEventListener("click", function () {
            //console.log(btn);
            console.log(btn.getAttributeNode("urlVal").value);
            productImg.setAttribute(
              "src",
              btn.getAttributeNode("urlVal").value
            );
          });
        }

        //規格
        let typeTitle = document.createElement("div");
        let typeTitleH2 = document.createElement("h2");

        typeTitleH1.innerText = "規格";
        typeTitle.classList.add(
          "w-100",
          "d-flex",
          "justify-content-center",
          "justify-content-md-start"
        );

        typeTitle.appendChild(typeTitleH2);
        typeArea.appendChild(typeTitle);

        for (let item of Product[product].Spec.Storge) {
          let typeDiv = document.createElement("div");
          let typeBtn = document.createElement("button");
          let typeBtnDiv = document.createElement("div");
          let typeP = document.createElement("p");
          let typeSpan = document.createElement("span");

          typeDiv.classList.add("col-6", "col-md-4");

          typeBtn.classList.add(
            "type-btn",
            "btn",
            "btn-outline-dark",
            "mb-3",
            "w-100"
          );
          typeBtn.setAttribute("fit", item.fit);

          typeBtnDiv.classList.add(
            "p-4",
            "d-flex",
            "flex-column",
            "justify-content-center",
            "align-items-center"
          );

          typeP.classList.add("font-weight-bolder");
          typeP.innerText = item.size;

          typeSpan.innerText = `NT$${item.fit}`;

          typeBtnDiv.appendChild(typeP);
          typeBtnDiv.appendChild(typeSpan);

          typeBtn.appendChild(typeBtnDiv);
          typeDiv.appendChild(typeBtn);

          typeArea.appendChild(typeDiv);
        }

        let typeBtns = document.getElementsByClassName("type-btn");

        //價錢
        let priceTitle = document.createElement("div");
        let priceTitleH2 = document.createElement("h2");

        priceTitleH1.innerText = "價格試算";
        priceTitle.classList.add(
          "w-100",
          "d-flex",
          "justify-content-center",
          "justify-content-md-start"
        );

        priceTitle.appendChild(priceTitleH2);

        priceArea.appendChild(priceTitle);
        for (let item of typeBtns) {
          item.addEventListener("click", function () {
            priceArea.innerHTML = "";
            let priceTitle = document.createElement("div");
            let priceTitleH2 = document.createElement("h2");

            priceTitleH2.innerText = "價格";
            priceTitle.classList.add(
              "w-100",
              "d-flex",
              "justify-content-center",
              "justify-content-md-start"
            );

            priceTitle.appendChild(priceTitleH2);

            priceArea.appendChild(priceTitle);

            //顯示價錢
            let fit = item.getAttributeNode("fit").value;

            let priceDiv = document.createElement("div");
            let priceP = document.createElement("p");

            priceDiv.classList.add(
              "col-12",
              "d-flex",
              "justify-content-center",
              "justify-content-md-start"
            );

            priceP.classList.add("display-4", "font-weight-bolder");
            priceP.innerText = `NT$${fit}`;

            priceDiv.appendChild(priceP);

            priceArea.appendChild(priceDiv);
          });
        }
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
